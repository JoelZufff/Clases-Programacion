CCS PCH C Compiler, Version 5.112, 29001               01-oct.-23 20:53

               Filename:   C:\Users\diego\Desktop\Programacion Avanzada\Practicas\Practica 6\En clase\Practica 6.lst

               ROM used:   1078 bytes (3%)
                           Largest free fragment is 31690
               RAM used:   9 (0%) at main() level
                           20 (1%) worst case
               Stack used: 1 locations
               Stack size: 31

*
0000:  GOTO   02CC
.................... #include <18f4550.h>   // Libreria del Microcontrolador
.................... //////////// Standard Header file for the PIC18F4550 device ////////////////
.................... ///////////////////////////////////////////////////////////////////////////
.................... ////        (C) Copyright 1996, 2020 Custom Computer Services          ////
.................... //// This source code may only be used by licensed users of the CCS C  ////
.................... //// compiler.  This source code may only be distributed to other      ////
.................... //// licensed users of the CCS C compiler.  No other use, reproduction ////
.................... //// or distribution is permitted without written permission.          ////
.................... //// Derivative programs created using this software in object code    ////
.................... //// form are not restricted in any way.                               ////
.................... ///////////////////////////////////////////////////////////////////////////
.................... #device PIC18F4550
0004:  MOVLW  8E
0006:  MOVWF  00
0008:  MOVFF  08,01
000C:  MOVFF  07,02
0010:  CLRF   03
0012:  MOVF   01,F
0014:  BTFSS  FD8.2
0016:  GOTO   0032
001A:  MOVFF  02,01
001E:  CLRF   02
0020:  MOVLW  08
0022:  SUBWF  00,F
0024:  MOVF   01,F
0026:  BTFSS  FD8.2
0028:  GOTO   0032
002C:  CLRF   00
002E:  GOTO   0046
0032:  BCF    FD8.0
0034:  BTFSC  01.7
0036:  GOTO   0044
003A:  RLCF   02,F
003C:  RLCF   01,F
003E:  DECF   00,F
0040:  GOTO   0032
0044:  BCF    01.7
0046:  RETURN 0
0048:  MOVF   07,W
004A:  BTFSC  FD8.2
004C:  BRA    0198
004E:  MOVWF  13
0050:  MOVF   0B,W
0052:  BTFSC  FD8.2
0054:  BRA    0198
0056:  SUBWF  13,F
0058:  BNC   0064
005A:  MOVLW  7F
005C:  ADDWF  13,F
005E:  BTFSC  FD8.0
0060:  BRA    0198
0062:  BRA    0070
0064:  MOVLW  81
0066:  SUBWF  13,F
0068:  BTFSS  FD8.0
006A:  BRA    0198
006C:  BTFSC  FD8.2
006E:  BRA    0198
0070:  MOVFF  13,00
0074:  CLRF   01
0076:  CLRF   02
0078:  CLRF   03
007A:  CLRF   12
007C:  MOVFF  08,11
0080:  BSF    11.7
0082:  MOVFF  09,10
0086:  MOVFF  0A,0F
008A:  MOVLW  19
008C:  MOVWF  13
008E:  MOVF   0E,W
0090:  SUBWF  0F,F
0092:  BC    00AE
0094:  MOVLW  01
0096:  SUBWF  10,F
0098:  BC    00AE
009A:  SUBWF  11,F
009C:  BC    00AE
009E:  SUBWF  12,F
00A0:  BC    00AE
00A2:  INCF   12,F
00A4:  INCF   11,F
00A6:  INCF   10,F
00A8:  MOVF   0E,W
00AA:  ADDWF  0F,F
00AC:  BRA    00FE
00AE:  MOVF   0D,W
00B0:  SUBWF  10,F
00B2:  BC    00D8
00B4:  MOVLW  01
00B6:  SUBWF  11,F
00B8:  BC    00D8
00BA:  SUBWF  12,F
00BC:  BC    00D8
00BE:  INCF   12,F
00C0:  INCF   11,F
00C2:  MOVF   0D,W
00C4:  ADDWF  10,F
00C6:  MOVF   0E,W
00C8:  ADDWF  0F,F
00CA:  BNC   00FE
00CC:  INCF   10,F
00CE:  BNZ   00FE
00D0:  INCF   11,F
00D2:  BNZ   00FE
00D4:  INCF   12,F
00D6:  BRA    00FE
00D8:  MOVF   0C,W
00DA:  IORLW  80
00DC:  SUBWF  11,F
00DE:  BC    00FC
00E0:  MOVLW  01
00E2:  SUBWF  12,F
00E4:  BC    00FC
00E6:  INCF   12,F
00E8:  MOVF   0C,W
00EA:  IORLW  80
00EC:  ADDWF  11,F
00EE:  MOVF   0D,W
00F0:  ADDWF  10,F
00F2:  BNC   00C6
00F4:  INCF   11,F
00F6:  BNZ   00C6
00F8:  INCF   12,F
00FA:  BRA    00C6
00FC:  BSF    03.0
00FE:  DECFSZ 13,F
0100:  BRA    0104
0102:  BRA    011A
0104:  BCF    FD8.0
0106:  RLCF   0F,F
0108:  RLCF   10,F
010A:  RLCF   11,F
010C:  RLCF   12,F
010E:  BCF    FD8.0
0110:  RLCF   03,F
0112:  RLCF   02,F
0114:  RLCF   01,F
0116:  RLCF   14,F
0118:  BRA    008E
011A:  BTFSS  14.0
011C:  BRA    012A
011E:  BCF    FD8.0
0120:  RRCF   01,F
0122:  RRCF   02,F
0124:  RRCF   03,F
0126:  RRCF   14,F
0128:  BRA    012E
012A:  DECF   00,F
012C:  BZ    0198
012E:  BTFSC  14.7
0130:  BRA    016E
0132:  BCF    FD8.0
0134:  RLCF   0F,F
0136:  RLCF   10,F
0138:  RLCF   11,F
013A:  RLCF   12,F
013C:  MOVF   0E,W
013E:  SUBWF  0F,F
0140:  BC    0150
0142:  MOVLW  01
0144:  SUBWF  10,F
0146:  BC    0150
0148:  SUBWF  11,F
014A:  BC    0150
014C:  SUBWF  12,F
014E:  BNC   0184
0150:  MOVF   0D,W
0152:  SUBWF  10,F
0154:  BC    0160
0156:  MOVLW  01
0158:  SUBWF  11,F
015A:  BC    0160
015C:  SUBWF  12,F
015E:  BNC   0184
0160:  MOVF   0C,W
0162:  IORLW  80
0164:  SUBWF  11,F
0166:  BC    016E
0168:  MOVLW  01
016A:  SUBWF  12,F
016C:  BNC   0184
016E:  INCF   03,F
0170:  BNZ   0184
0172:  INCF   02,F
0174:  BNZ   0184
0176:  INCF   01,F
0178:  BNZ   0184
017A:  INCF   00,F
017C:  BZ    0198
017E:  RRCF   01,F
0180:  RRCF   02,F
0182:  RRCF   03,F
0184:  MOVFF  08,13
0188:  MOVF   0C,W
018A:  XORWF  13,F
018C:  BTFSS  13.7
018E:  BRA    0194
0190:  BSF    01.7
0192:  BRA    01A0
0194:  BCF    01.7
0196:  BRA    01A0
0198:  CLRF   00
019A:  CLRF   01
019C:  CLRF   02
019E:  CLRF   03
01A0:  RETURN 0
01A2:  MOVF   0A,W
01A4:  BTFSC  FD8.2
01A6:  BRA    028A
01A8:  MOVWF  00
01AA:  MOVF   0E,W
01AC:  BTFSC  FD8.2
01AE:  BRA    028A
01B0:  ADDWF  00,F
01B2:  BNC   01BC
01B4:  MOVLW  81
01B6:  ADDWF  00,F
01B8:  BC    028A
01BA:  BRA    01C4
01BC:  MOVLW  7F
01BE:  SUBWF  00,F
01C0:  BNC   028A
01C2:  BZ    028A
01C4:  MOVFF  0B,12
01C8:  MOVF   0F,W
01CA:  XORWF  12,F
01CC:  BSF    0B.7
01CE:  BSF    0F.7
01D0:  MOVF   0D,W
01D2:  MULWF  11
01D4:  MOVFF  FF4,14
01D8:  MOVF   0C,W
01DA:  MULWF  10
01DC:  MOVFF  FF4,03
01E0:  MOVFF  FF3,13
01E4:  MULWF  11
01E6:  MOVF   FF3,W
01E8:  ADDWF  14,F
01EA:  MOVF   FF4,W
01EC:  ADDWFC 13,F
01EE:  MOVLW  00
01F0:  ADDWFC 03,F
01F2:  MOVF   0D,W
01F4:  MULWF  10
01F6:  MOVF   FF3,W
01F8:  ADDWF  14,F
01FA:  MOVF   FF4,W
01FC:  ADDWFC 13,F
01FE:  MOVLW  00
0200:  CLRF   02
0202:  ADDWFC 03,F
0204:  ADDWFC 02,F
0206:  MOVF   0B,W
0208:  MULWF  11
020A:  MOVF   FF3,W
020C:  ADDWF  13,F
020E:  MOVF   FF4,W
0210:  ADDWFC 03,F
0212:  MOVLW  00
0214:  ADDWFC 02,F
0216:  MOVF   0B,W
0218:  MULWF  10
021A:  MOVF   FF3,W
021C:  ADDWF  03,F
021E:  MOVF   FF4,W
0220:  ADDWFC 02,F
0222:  MOVLW  00
0224:  CLRF   01
0226:  ADDWFC 01,F
0228:  MOVF   0D,W
022A:  MULWF  0F
022C:  MOVF   FF3,W
022E:  ADDWF  13,F
0230:  MOVF   FF4,W
0232:  ADDWFC 03,F
0234:  MOVLW  00
0236:  ADDWFC 02,F
0238:  ADDWFC 01,F
023A:  MOVF   0C,W
023C:  MULWF  0F
023E:  MOVF   FF3,W
0240:  ADDWF  03,F
0242:  MOVF   FF4,W
0244:  ADDWFC 02,F
0246:  MOVLW  00
0248:  ADDWFC 01,F
024A:  MOVF   0B,W
024C:  MULWF  0F
024E:  MOVF   FF3,W
0250:  ADDWF  02,F
0252:  MOVF   FF4,W
0254:  ADDWFC 01,F
0256:  INCF   00,F
0258:  BTFSC  01.7
025A:  BRA    0266
025C:  RLCF   13,F
025E:  RLCF   03,F
0260:  RLCF   02,F
0262:  RLCF   01,F
0264:  DECF   00,F
0266:  MOVLW  00
0268:  BTFSS  13.7
026A:  BRA    0280
026C:  INCF   03,F
026E:  ADDWFC 02,F
0270:  ADDWFC 01,F
0272:  MOVF   01,W
0274:  BNZ   0280
0276:  MOVF   02,W
0278:  BNZ   0280
027A:  MOVF   03,W
027C:  BNZ   0280
027E:  INCF   00,F
0280:  BTFSC  12.7
0282:  BSF    01.7
0284:  BTFSS  12.7
0286:  BCF    01.7
0288:  BRA    0292
028A:  CLRF   00
028C:  CLRF   01
028E:  CLRF   02
0290:  CLRF   03
0292:  RETURN 0
0294:  MOVLW  8E
0296:  MOVWF  00
0298:  MOVF   06,W
029A:  SUBWF  00,F
029C:  MOVFF  07,02
02A0:  MOVFF  08,01
02A4:  BSF    02.7
02A6:  MOVF   00,F
02A8:  BZ    02BC
02AA:  BCF    FD8.0
02AC:  MOVF   02,F
02AE:  BNZ   02B4
02B0:  MOVF   01,F
02B2:  BZ    02BC
02B4:  RRCF   02,F
02B6:  RRCF   01,F
02B8:  DECFSZ 00,F
02BA:  BRA    02AA
02BC:  BTFSS  07.7
02BE:  BRA    02CA
02C0:  COMF   01,F
02C2:  COMF   02,F
02C4:  INCF   01,F
02C6:  BTFSC  FD8.2
02C8:  INCF   02,F
02CA:  RETURN 0
.................... 
.................... #list
.................... 
.................... #device adc = 8 // Resolucion del ADC en bits
.................... #fuses INTRC, NOWDT, NOPROTECT, NOLVP, CPUDIV1, PLL1 // Fusibles (Configuraciones del microcontrolador)
.................... #use delay(clock = 8M)
.................... 
.................... void main()
02CC:  CLRF   FF8
02CE:  BCF    FD0.7
02D0:  MOVLW  70
02D2:  MOVWF  FD3
02D4:  MOVF   FD3,W
02D6:  MOVF   FC1,W
02D8:  ANDLW  C0
02DA:  IORLW  0F
02DC:  MOVWF  FC1
02DE:  MOVLW  07
02E0:  MOVWF  FB4
.................... {  
....................    int duty;
....................    
....................    // CONFIFGURACION DE ADC
....................    setup_adc(adc_clock_div_2); // Sincronizamos las frecuencias
02E2:  MOVF   FC0,W
02E4:  ANDLW  C0
02E6:  MOVWF  FC0
02E8:  BCF    FC0.7
02EA:  BSF    FC2.0
....................    setup_adc_ports(AN0_TO_AN1); // Hay un sensor en AN0 y AN1.
02EC:  MOVF   FC1,W
02EE:  ANDLW  C0
02F0:  IORLW  0D
02F2:  MOVWF  FC1
....................    set_tris_a(0b00000011); // 1 entrada 0 salida
02F4:  MOVLW  03
02F6:  MOVWF  F92
....................    delay_us(10);
02F8:  MOVLW  06
02FA:  MOVWF  00
02FC:  DECFSZ 00,F
02FE:  BRA    02FC
0300:  NOP   
....................    
....................    // CONFIGURACION DE PWM
....................    setup_timer_2(T2_DIV_BY_16, 124, 1); // Primer parametro modificamos el preescalador
0302:  MOVLW  00
0304:  IORLW  06
0306:  MOVWF  FCA
0308:  MOVLW  7C
030A:  MOVWF  FCB
....................    setup_ccp1(CCP_PWM); // Activa el PMW en CCP1
030C:  BCF    F94.2
030E:  BCF    F8B.2
0310:  MOVLW  0C
0312:  MOVWF  FBD
0314:  CLRF   FB7
0316:  CLRF   FB6
....................    setup_ccp2(CCP_PWM); // Activa el PMW en CCP2
0318:  BCF    F94.1
031A:  BCF    F8B.1
031C:  MOVWF  FBA
....................    
....................    while(true)
....................    {  
....................       set_adc_channel(0);
031E:  MOVLW  00
0320:  MOVWF  01
0322:  MOVF   FC2,W
0324:  ANDLW  C3
0326:  IORWF  01,W
0328:  MOVWF  FC2
....................       delay_us(10);
032A:  MOVLW  06
032C:  MOVWF  00
032E:  DECFSZ 00,F
0330:  BRA    032E
0332:  NOP   
....................       
....................       duty = read_adc() / 255.0 * 124;
0334:  BSF    FC2.1
0336:  BTFSC  FC2.1
0338:  BRA    0336
033A:  CLRF   08
033C:  MOVFF  FC4,07
0340:  RCALL  0004
0342:  MOVFF  03,0A
0346:  MOVFF  02,09
034A:  MOVFF  01,08
034E:  MOVFF  00,07
0352:  CLRF   0E
0354:  CLRF   0D
0356:  MOVLW  7F
0358:  MOVWF  0C
035A:  MOVLW  86
035C:  MOVWF  0B
035E:  RCALL  0048
0360:  MOVFF  03,09
0364:  MOVFF  02,08
0368:  MOVFF  01,07
036C:  MOVFF  00,06
0370:  MOVFF  03,0D
0374:  MOVFF  02,0C
0378:  MOVFF  01,0B
037C:  MOVFF  00,0A
0380:  CLRF   11
0382:  CLRF   10
0384:  MOVLW  78
0386:  MOVWF  0F
0388:  MOVLW  85
038A:  MOVWF  0E
038C:  RCALL  01A2
038E:  MOVFF  03,09
0392:  MOVFF  02,08
0396:  MOVFF  01,07
039A:  MOVFF  00,06
039E:  RCALL  0294
03A0:  MOVFF  01,05
....................       set_pwm1_duty(duty); // Establecemos el CCP1 (Ciclos de trabajo)
03A4:  MOVFF  05,FBE
....................       
....................       set_adc_channel(1);
03A8:  MOVLW  04
03AA:  MOVWF  01
03AC:  MOVF   FC2,W
03AE:  ANDLW  C3
03B0:  IORWF  01,W
03B2:  MOVWF  FC2
....................       delay_us(10);
03B4:  MOVLW  06
03B6:  MOVWF  00
03B8:  DECFSZ 00,F
03BA:  BRA    03B8
03BC:  NOP   
....................       
....................       duty = read_adc() / 255.0 * 124;
03BE:  BSF    FC2.1
03C0:  BTFSC  FC2.1
03C2:  BRA    03C0
03C4:  CLRF   08
03C6:  MOVFF  FC4,07
03CA:  RCALL  0004
03CC:  MOVFF  03,0A
03D0:  MOVFF  02,09
03D4:  MOVFF  01,08
03D8:  MOVFF  00,07
03DC:  CLRF   0E
03DE:  CLRF   0D
03E0:  MOVLW  7F
03E2:  MOVWF  0C
03E4:  MOVLW  86
03E6:  MOVWF  0B
03E8:  RCALL  0048
03EA:  MOVFF  03,09
03EE:  MOVFF  02,08
03F2:  MOVFF  01,07
03F6:  MOVFF  00,06
03FA:  MOVFF  03,0D
03FE:  MOVFF  02,0C
0402:  MOVFF  01,0B
0406:  MOVFF  00,0A
040A:  CLRF   11
040C:  CLRF   10
040E:  MOVLW  78
0410:  MOVWF  0F
0412:  MOVLW  85
0414:  MOVWF  0E
0416:  RCALL  01A2
0418:  MOVFF  03,09
041C:  MOVFF  02,08
0420:  MOVFF  01,07
0424:  MOVFF  00,06
0428:  RCALL  0294
042A:  MOVFF  01,05
....................       set_pwm2_duty(duty); // Establecemos el CCP2 (Ciclos de trabajo)
042E:  MOVFF  05,FBB
0432:  BRA    031E
....................    }
.................... }
0434:  SLEEP 

Configuration Fuses:
   Word  1: C920   PLL1 CPUDIV1 USBDIV INTRC FCMEN IESO
   Word  2: 1E3E   PUT BROWNOUT BORV21 VREGEN NOWDT WDT32768
   Word  3: 8700   CCP2C1 PBADEN LPT1OSC MCLR
   Word  4: 00A1   STVREN NOLVP ICSP2 NOXINST NODEBUG
   Word  5: C00F   NOPROTECT NOCPB NOCPD
   Word  6: E00F   NOWRT NOWRTC NOWRTB NOWRTD
   Word  7: 400F   NOEBTR NOEBTRB
